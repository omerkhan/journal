---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getEntry } from 'astro:content';

const nowPage = await getEntry('pages', 'now');

if (!nowPage) {
  return Astro.redirect('/404');
}

const { Content } = await nowPage.render();

const formattedDate = nowPage.data.lastUpdated?.toLocaleDateString('en-US', {
  month: 'long',
  day: 'numeric',
  year: 'numeric',
});
---

<BaseLayout title="Now">
  <section class="px-4 sm:px-6 lg:px-8 pb-16">
    <div class="max-w-2xl mx-auto">
      <h1 class="font-serif text-post-title-mobile sm:text-post-title text-text-primary mb-3">
        Now
      </h1>

      {formattedDate && (
        <p class="text-text-secondary text-sm mb-8">
          Last updated: {formattedDate}
        </p>
      )}

      <div class="prose max-w-reading">
        <Content />
      </div>

      <footer class="mt-16 pt-8 border-t border-border">
        <p class="text-text-secondary text-sm">
          This is a <a href="https://nownownow.com/about" target="_blank" rel="noopener noreferrer" class="text-accent hover:text-accent-hover">Now page</a>.
          It's a snapshot of what I'm focused on at this point in my life.
        </p>
      </footer>
    </div>
  </section>
</BaseLayout>
